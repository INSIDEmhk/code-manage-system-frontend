<style scoped>
	.admin-page {
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;
		width:637.5rpx;
		margin: auto; 
	}
	
	

	
	
	
	.error-pop {
	    position: fixed;
		left: 20%; /* æ°´å¹³å±…ä¸­ */
	    top: -500rpx; /* é»˜è®¤éšè—åœ¨é¡¶éƒ¨ä»¥å¤– */
		width:60%;
	    background-color: #ff4d4f;
	    color: white;
	    font-size: 32rpx;
	    text-align: center;
	    line-height: 100rpx;
	    height: 100rpx;
	    z-index: 3000;
	    box-shadow: 0rpx 8rpx 12rpx rgba(0, 0, 0, 0.1);
	    transition: top 0.3s ease; 
		border-radius:20rpx;
	}
	
	.error-pop.active {
	    top: 105rpx; 
	}
	
	
	
	
	
	
	.header{
		padding-top:40rpx;
		display: flex;
		flex-direction: row;
		align-items: center;
		justify-content: center;
		width: 100%; 
		padding-bottom:50rpx;
	}
	
	
	
	.text-area{
		width: 100%; 
		text-align: left; 
		padding-left: 20rpx; 
		font-size: 28rpx; 
		font-weight: bold; 
		/* margin-bottom: 20rpx; */
		padding-bottom: 20rpx; 
		display:flex;
		flex-direction:row;
	}
	
	.text{
		font-size:35rpx; 
		flex-grow: 1; /* å æ®å‰©ä½™ç©ºé—´ï¼Œè®©è¡Œå†…å‰©ä½™å…ƒç´ ç´§é å³ä¾§ */
	}
	
	
	.placeholder-text {
	  font-size: 28rpx;
	  color: gray; 
	}

	
	
	
	.semester-list-section1 {
	    display: flex;
	    flex-direction: column;
	    align-items: center;
	    justify-content: center;
	    width: 100%;
		border:1px solid gray;
		border-radius: 20rpx;
		height:300rpx;
		margin-bottom:60rpx;
		/* padding-top:11rpx; */
	}
	
	.semester-list-section {
	    display: flex;
	    flex-direction: column;
	    align-items: center;
	    justify-content: center;
	    width: 100%;
		border:1px solid gray;
		border-radius: 20rpx;
		height:auto;
		min-height:300rpx;
		margin-bottom:20rpx;
	}
	
	.semester-item {
		display: flex;
		flex-direction: column;
	    width: 90%;
	    padding: 20rpx;
	    background-color: #f9f9f9;
		margin-top:20rpx;
	    margin-bottom: 30rpx;
	    border-radius: 15rpx;
	    box-shadow: 0 2rpx 6rpx rgba(0, 0, 0, 0.1);
		opacity: 0;  /* åˆå§‹é€æ˜ */
		animation: slideIn 0.5s ease forwards;  /* æ»‘å…¥åŠ¨ç”» */
	}
	
	.semester-item1 {
		display: flex;
		flex-direction: column;
	    width: 90%;
	    padding: 20rpx;
	    background-color: #f9f9f9;
	    border-radius: 15rpx;
	    box-shadow: 0 2rpx 6rpx rgba(0, 0, 0, 0.1);
		opacity: 0;  /* åˆå§‹é€æ˜ */
		animation: slideIn 0.5s ease forwards;  /* æ»‘å…¥åŠ¨ç”» */
		/* height:200rpx; */
	}
	
	
	
	/* å­¦æœŸåç§° */
	.semester-name {
	    font-size: 30rpx;
	    font-weight: bold;
	    margin-bottom: 20rpx;
	}
	
	.semester-name1 {
	    font-size: 32rpx;
	    font-weight: bold;
	    margin-bottom: 50rpx;
	}
	
	
	/* å­¦æœŸæ—¥æœŸ */
	.semester-dates {
	    font-size: 26rpx;
	    color: #666666;
	}
	.semester-dates text {
	    display: block; /* è®©æ¯ä¸ªtextæ ‡ç­¾æ¢è¡Œæ˜¾ç¤º */
	    margin-bottom: 5rpx;
	}
	.semester-dates1 {
	    font-size: 28rpx;
	    color: #666666;
	}
	.semester-dates1 text {
	    display: block; /* è®©æ¯ä¸ªtextæ ‡ç­¾æ¢è¡Œæ˜¾ç¤º */
	    margin-bottom: 5rpx;
	}
	
	
	/* å­¦æœŸçŠ¶æ€(å¯ç”¨/åœç”¨ï¼Ÿ) */
	.semester-status {
	    margin-top: 10rpx;
	}
	
	
	/* å¯ç”¨/åœç”¨æŒ‰é’® */
	.status-button {
		width: 240rpx; 
		height: 60rpx; 
	    border-radius: 20rpx;
	    cursor: pointer;
		font-size:32rpx;
		display: flex; 
		align-items: center; 
		justify-content: center; 
		text-align: center; 
	}
	.status-button.active {
	    /* background-color: #4caf50; */
		background-color:lightseagreen;
	    color: white;
	}
	.status-button.inactive {
	    background-color: #f44336;
	    color: white;
	}
	
	
	

	
	
	/* ç¡®è®¤é¡µé¢ */
	.modal-overlay {
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background-color: rgba(0, 0, 0, 0.5);
		display: flex;
		align-items: center;
		justify-content: center;
		z-index: 2000; /* ä¿è¯é®ç½©å±‚çš„ z-index æ¯”åº•éƒ¨å¯¼èˆªæ é«˜ */
	}
	
	.modal-content {
		width: 80%;
		background-color: white;
		border-radius: 10rpx;
		padding: 30rpx;
		text-align: center;
		box-shadow: 0 4rpx 8rpx rgba(0, 0, 0, 0.2);
	}
	
	.modal-content1 {
		width: 80%;
		background-color: white;
		border-radius: 10rpx;
		padding: 30rpx;
		text-align: center;
		box-shadow: 0 4rpx 8rpx rgba(0, 0, 0, 0.2);
		animation: slideIn1 0.4s ease-out; /* ä½¿ç”¨åŠ¨ç”» */
	}
	
	.modal-buttons {
		display: flex;
		justify-content: space-around;
		margin-top: 35rpx;
	}
	
	.modal-button {
		width: 120rpx;
		height: 60rpx;
		border-radius: 10rpx;
		font-size: 28rpx;
		text-align: center;
		line-height: 60rpx;
		cursor: pointer;
	}
	
	.confirm-button {
	  /* background-color: #28a745; */
		background-color: #f44336;
		color: white;
	}
	
	.confirm-button1 {
		background-color: #28a745;
		background-color: #f44336;
		color: white;
	}
	
	.cancel-button {
		background-color: #ccc;
		color: black;
	}

	.info-label {
		font-size: 28rpx;
		margin-bottom: 10rpx;
		display: flex; 
		justify-content: flex-start; /* å·¦å¯¹é½ */
	}
	
	
	
	.info-input1 {
		width: 95%;
		padding: 10rpx;
		font-size: 28rpx;
		border-radius: 10rpx;
		/* margin:auto; */
		margin-bottom: 60rpx;
		margin-top:15rpx;
		border:1px solid gray;
		text-align: left;
	}

	.info-input {
		width: 95%;
		height: 38rpx; /* è®¾ç½®è¾“å…¥æ¡†çš„é«˜åº¦ */
		/* min-height:0rpx; */
		padding: 10rpx;
		font-size: 28rpx;
		border-radius: 10rpx;
		margin-bottom: 20rpx;
		border:1px solid lightgray;
		margin-top:15rpx;
		margin-bottom:60rpx;
		text-align: left;
	}
	
	/* è®©å¹´æœˆæ—¥ä¸‰ä¸ªè¾“å…¥æ¡†å‡ºç°åœ¨åŒä¸€è¡Œ */
	.flex-row {
		display: flex;
		justify-content: space-between; /* æˆ–ä½¿ç”¨ space-aroundã€center ç­‰æ¥æ§åˆ¶é—´è· */
	}




	/* ä»ä¸Šåˆ°ä¸‹æ»‘å…¥ */
	@keyframes slideIn {
		0% {
			transform: translateY(-20rpx);  
			opacity: 0;  
		}
		100% {
			transform: translateY(0);  
			opacity: 1;  
		}
	}
	@keyframes slideIn1 {
	    0% {
	        transform: translateY(-80rpx); 
	        opacity: 0;
	    }
	    100% {
	        transform: translateY(0); 
	        opacity: 1;
	    }
	}
	
	
	
	
	/* åˆ›å»ºå­¦æœŸæŒ‰é’® */
	.create-semester-button {
		/* (urlåæœŸéœ€è¦ä¿®æ”¹ï¼ï¼ï¼) */
		background-image: url('/static/createSemesterButton.png'); 
	    width: 150rpx;
	    height: 50rpx;
	    cursor: pointer;
		background-size: cover;
		background-position: center 30%; 
		border:1px solid transparent;
		outline: none; 
		/* border:1px solid black; */
	}
	
	.create-semester-button:after{
		border: none; 
	}
	
	
	.selectDate-button{
		  width: 240rpx;
		  height: 60rpx;
		  border-radius: 20rpx;
		  cursor: pointer;
		  font-size: 24rpx;
		  display: flex; 
		  align-items: center; 
		  justify-content: center;
		  text-align: center;  
		  border: none;  
		  background-color: lightseagreen;  
		  padding: 0;  
		  outline: none; 
		  color:white;
		  margin-top: -10rpx;  /* ç¨å¾®å‘ä¸Šç§»åŠ¨æŒ‰é’® */
	}

	.selectDate-button:after{
		border: none; 
	}







	

	
	
	
	
	/* åº•éƒ¨çš„å¯¼èˆªæ  */
	.footer-blank{
		height: 100rpx;
	}
	.footer {
	    display: flex;
	    flex-direction: row;
	    align-items: center;
	    justify-content: space-around;
	    position: fixed; 
	    bottom: 0rpx;
	    left: 0;
	    width: 100%;
	    height: 100rpx;
	    background-color: #f9f9f9;
	    border-top: 1px solid #e0e0e0;
	    box-shadow: 0 -2rpx 4rpx rgba(0, 0, 0, 0.1);
	    z-index: 1000;
	}
	
	.footer-item {
	    display: flex;
	    flex-direction: column;
		align-items: center;
	    justify-content: center;
	    flex: 1;
	    color: #666666;
	    font-size: 28rpx;
	}
	
	.footer-item .icon {
	    font-size: 36rpx;
	    margin-bottom: 5rpx;
	}
	
	.footer-item .text {
	    font-size: 24rpx;
	}
</style>






<template>
	<view class="admin-page">
		<view class="error-pop" :class="{ active: this.errorMessage }" :style="{ backgroundColor: errorPopBackgroundColor }">{{ this.errorMessage }}</view>

		<view class="header">
		    <text class="text">æ‚¨å¥½ï¼å°Šæ•¬çš„ç®¡ç†å‘˜</text>
		</view>
		
		
		
		<view class="text-area">
		  <text class="text">è¿›è¡Œä¸­çš„å­¦æœŸ</text>
		</view>
		
		
		
		<!-- è¿›è¡Œä¸­çš„å­¦æœŸ -->
		<view class="semester-list-section1">
		  <view class="semester-item1" v-if="who">
			<text class="semester-name">{{ this.activeSemester.name }}</text>
			<text class="semester-dates">
			<text>å­¦æœŸç¼–å·: {{ this.activeSemester.semesterId }}</text>
			  <text>å¼€å§‹æ—¶é—´: {{ formatDate(this.activeSemester.startTime) }}</text>
			  <text>ç»“æŸæ—¶é—´: {{ formatDate(this.activeSemester.endTime) }}</text>
			</text>
			<view class="semester-status">
			  <button
				@click="viewAllCourses"
				class="status-button inactive"
			  >è¯¾ç¨‹ç®¡ç†</button>
			</view>
		  </view>
		</view>

		

		<view class="text-area">
		  <text class="text">å·²ç»“æŸæˆ–æœªå¼€å§‹çš„å­¦æœŸ</text>
		  <button @click="handleCreateSemester" class="create-semester-button"></button>
		</view>
		
		
		
		<!-- å·²ç»“æŸæˆ–æœªå¼€å§‹çš„å­¦æœŸ -->
		<view class="semester-list-section">
		  <view class="semester-item" v-for="(semester, index) in inactiveSemesterList" :key="index">
			<text class="semester-name">{{ semester.name }}</text>
			<text class="semester-dates">
				<text>å­¦æœŸç¼–å·: {{ semester.semesterId }}</text>
				<text>å¼€å§‹æ—¶é—´: {{ formatDate(semester.startTime) }}</text>
				<text>ç»“æŸæ—¶é—´: {{ formatDate(semester.endTime) }}</text>
			</text>
			<view class="semester-status">
			  <button
				@click="openFirstConfirmationModal(semester.semesterId,semester.name)"
				class="status-button active"
			  >å¯ç”¨</button>
			</view>
		  </view>
		</view>
		
		
		
		
		
		
		<!-- ç¬¬ä¸€ä¸ªç¡®è®¤å¼¹çª— -->
		<view v-if="showFirstConfirmationModal" class="modal-overlay">
		  <view class="modal-content">
		    <text>æ‚¨ç¡®å®šè¦å°† <text style="color: red;">{{ this.selectedSemesterName }}</text> <br>æ›´æ”¹ä¸º <text style="color: red;">å¯ç”¨</text> çŠ¶æ€å—?</text>
		    <view class="modal-buttons">
		      <button class="modal-button confirm-button" @click="openSecondConfirmationModal">ç¡®è®¤</button>
		      <button class="modal-button cancel-button" @click="closeFirstConfirmationModal">å–æ¶ˆ</button>
		    </view>
		  </view>
		</view>
		
		
		
		<!-- ç¬¬äºŒä¸ªç¡®è®¤å¼¹çª— -->
		<view v-if="showSecondConfirmationModal" class="modal-overlay">
		  <view class="modal-content">
		    <text>æ‚¨ç¡®è®¤è¦å¯¹å½“å‰å­¦æœŸæ‰§è¡Œæ­¤æ“ä½œå—ï¼Ÿ<br><text style="color: red;">ï¼ˆ å½“å‰æ“ä½œä¸€æ—¦æ‰§è¡Œä¾¿æ— æ³•æ’¤é”€ ! ï¼‰</text></text>
		    <view class="modal-buttons">
		      <button class="modal-button confirm-button" @click="confirmChangeStatus">ç¡®è®¤</button>
		      <button class="modal-button cancel-button" @click="closeSecondConfirmationModal">å–æ¶ˆ</button>
		    </view>
		  </view>
		</view>
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		<!-- åˆ›å»ºå­¦æœŸå¼¹çª— -->
		<view v-if="showCreateSemesterModal" class="modal-overlay"  v-show="modalVisible">
		  <view class="modal-content1">
		    <text class="info-label">å­¦æœŸåç§°ï¼š</text>
		    <input class="info-input1" v-model="semesterName" placeholder="è¯·è¾“å…¥å­¦æœŸåç§°" />
		
		
		
		    <!-- é€‰æ‹©å¼€å§‹æ—¶é—´ -->
			<view class="flex-row">
				<text class="info-label">å­¦æœŸå¼€å§‹æ—¶é—´ï¼š</text>
				<picker mode="date"   :value="startDate" start="2020-01-01" end="2030-12-31" @change="handleStartDateChange"  @cancel="handlePickerCancel">
					<button class="selectDate-button" @click="hideModalOverlay">ç‚¹å‡»é€‰æ‹©å¼€å§‹æ—¶é—´</button>
				</picker>
			</view>
			<view class="info-input1">
				<span v-if="!startDate" class="placeholder-text">è¯·é€‰æ‹©å­¦æœŸå¼€å§‹æ—¶é—´</span>
				<span v-else>{{ startDate }}</span>
			</view>



            <!-- é€‰æ‹©ç»“æŸæ—¶é—´ -->
			<view class="flex-row">
				<text class="info-label">å­¦æœŸç»“æŸæ—¶é—´ï¼š</text>
				<picker mode="date" :value="endDate" start="2020-01-01" end="2030-12-31" @change="handleEndDateChange"  @cancel="handlePickerCancel">
					<button class="selectDate-button" @click="hideModalOverlay">ç‚¹å‡»é€‰æ‹©ç»“æŸæ—¶é—´</button>
				</picker>
			</view>
			<view class="info-input1"><!-- {{ endDate || 'è¯·é€‰æ‹©å­¦æœŸç»“æŸæ—¶é—´'}} -->
				<span v-if="!endDate" class="placeholder-text">è¯·é€‰æ‹©å­¦æœŸç»“æŸæ—¶é—´</span>
				<span v-else>{{ endDate }}</span>
			</view>
		
		
		
		
		    <view class="modal-buttons">
		      <button class="modal-button confirm-button1" @click="submitCreateSemester">ç¡®è®¤</button>
		      <button class="modal-button cancel-button"  @click="closeCreateSemesterModal">å–æ¶ˆ</button>
		    </view>
		  </view>
		</view>

		
		
		
		
		
		
		<!-- åº•éƒ¨å¯¼èˆªæ  -->
		<!-- æ·»åŠ ä¸€æ®µç©ºç™½æŒ¤å ç©ºé—´ï¼Œé˜²æ­¢footeråº•éƒ¨å¯¼èˆªæ é®æŒ¡ä½æœ€ä¸‹é¢çš„ä½œä¸š -->
		<view class="footer-blank"></view>
		<view class="footer">
			<view class="footer-item" @click="goToHome">
				<view class="icon">ğŸ“…</view>
				<view class="text" style="color:#ff4d4f">å­¦æœŸç®¡ç†</view>
			</view>
			<view class="footer-item" @click="goToTeachers">
				<view class="icon">ğŸ§‘â€ğŸ“</view>
				<view class="text">æ•™å¸ˆç®¡ç†</view>
			</view>
			<view class="footer-item" @click="goToProfile">
				<view class="icon">ğŸ‘¤</view>
				<view class="text">ç³»ç»Ÿç®¡ç†</view>
			</view>
		</view>
	</view>
</template>






<script>
	import { config } from '../../../config'; // å¯¼å…¥ config.js æ–‡ä»¶
	
	
	export default {
	    data() {
			return {
				apiUrl: `http://${config.host}:${config.port}`, // ä½¿ç”¨é…ç½®çš„hostå’Œport
				 
				 
				
				who:"",
				
				// é”™è¯¯å¼¹çª—æç¤ºä¿¡æ¯
				errorMessage: '',
				errorPopBackgroundColor: '#ff4d4f', // é”™è¯¯å¼¹çª—èƒŒæ™¯é¢œè‰²
				timeoutId: null,
				
				

				// å¤„äºâ€œå¯ç”¨â€çŠ¶æ€çš„å­¦æœŸ
				activeSemester:[],
				// å¤„äºâ€œåœç”¨â€çŠ¶æ€çš„å­¦æœŸåˆ—è¡¨
				inactiveSemesterList:[],
				
				
				

				
				
				
				// â€œå¯ç”¨â€å­¦æœŸæˆ–â€œåœç”¨â€å­¦æœŸçš„ç¡®è®¤é¡µé¢
				showFirstConfirmationModal: false, 
				showSecondConfirmationModal: false,
				selectedSemesterId: "", 
				selectedSemesterName:"",
				
				
				
				// â€œåˆ›å»ºâ€å­¦æœŸæ“ä½œ:è¾“å…¥åˆ›å»ºå­¦æœŸä¿¡æ¯
				semesterName: '',
				startDate: '', 
				endDate: '', 
				
				
				
				showCreateSemesterModal: false,  
				modalVisible: true, 
				
				
				
				
			};
		},
		
		
		
		
		
		
		onLoad(query) {
			console.log(query.id);
			this.who=query.id;
			
			if(!this.who){
				// console.log('Debug: this.who is', this.who); 
				this.showError("è¯·å…ˆç™»å½•ï¼");
				uni.reLaunch({
					// (urlåæœŸéœ€è¦ä¿®æ”¹ï¼ï¼ï¼)
				    url: "/pages/index/login"
				});
				return;
			}
			
			this.loadAdminInf();
			this.loadInactiveSemesterList();
			this.loadActiveSemesterList();
		},
		
		
		
		
		
		
		methods: {
			// æ ¼å¼åŒ–æ—¥æœŸ
			formatDate(date) {
				const d = new Date(date);
				return `${d.getFullYear()}å¹´${d.getMonth() + 1}æœˆ${d.getDate()}æ—¥`;
			},
			
			
			// æ›´æ–°å¼€å§‹æ—¶é—´
			handleStartDateChange(event) {
				this.startDate = event.detail.value; 
				this.modalVisible = true; // é€‰æ‹©å®Œæ—¥æœŸåæ˜¾ç¤º modal-overlay
			},
			  
			// æ›´æ–°ç»“æŸæ—¶é—´
			handleEndDateChange(event) {
				this.endDate = event.detail.value;  
				this.modalVisible = true; // é€‰æ‹©å®Œæ—¥æœŸåæ˜¾ç¤º modal-overlay
			},
			
			// é€‰æ‹©å–æ¶ˆæ—¶ï¼Œæ¢å¤æ˜¾ç¤º modal-overlay
			handlePickerCancel() {
			    this.modalVisible = true; // æ˜¾ç¤º modal-overlay
			},
			
			hideModalOverlay() {
			    this.modalVisible = false; // ç‚¹å‡»é€‰æ‹©æŒ‰é’®æ—¶éšè— modal-overlay
			},
			
			
			
			
			
			
			
			
			// é¡¶éƒ¨å¼¹çª—
			showError(message, color = "#ff4d4f") {
				this.errorMessage = message; // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
				this.errorPopBackgroundColor = color; // è®¾ç½®å¼¹çª—èƒŒæ™¯è‰²
				if (this.timeoutId) {
					clearTimeout(this.timeoutId); // æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨
				}
				this.timeoutId = setTimeout(() => {
					this.errorMessage = ""; // éšè—é”™è¯¯ä¿¡æ¯
					this.timeoutId = null; // æ¸…é™¤å®šæ—¶å™¨
				}, 1200); // 1.2ç§’åéšè—é”™è¯¯ä¿¡æ¯
			},
			
			
			
			
			
			
			
			
			// åˆ›å»ºå­¦æœŸå¼¹çª—		
			handleCreateSemester() {
				if(!this.who){
					// console.log('Debug: this.who is', this.who); 
					this.showError("è¯·å…ˆç™»å½•ï¼");
					return;
				}
				this.showCreateSemesterModal = true;  
			},
			
			
			
			// ç‚¹å‡»ç¡®è®¤æŒ‰é’®æäº¤åˆ›å»ºå­¦æœŸè¡¨å•
			submitCreateSemester() {
				// åˆ¤æ–­å­¦æœŸåï¼Œå¹´æœˆæ—¥æ˜¯å¦ä¸ºç©º
				if (!this.semesterName || !this.startDate || !this.endDate) {
					this.showError("æ‰€æœ‰å­—æ®µå‡ä¸èƒ½ä¸ºç©ºï¼");
					return;
				}
				
				// åˆ¤æ–­æ—¥æœŸæ˜¯å¦åˆæ³•
				const startDateParts = this.startDate.split('-'); 
				const endDateParts = this.endDate.split('-'); 
				if (!this.isValidDate(startDateParts[0], startDateParts[1], startDateParts[2])) {
				    this.showError("å¼€å§‹æ—¥æœŸæ— æ•ˆï¼");
				    return;
				}
				if (!this.isValidDate(endDateParts[0], endDateParts[1], endDateParts[2])) {
				    this.showError("ç»“æŸæ—¥æœŸæ— æ•ˆï¼");
				    return;
				}  
				// åˆ¤æ–­å¼€å§‹æ—¥æœŸæ˜¯å¦å°äºç»“æŸæ—¥æœŸ
				const startDateObj = new Date(this.startDate);
				const endDateObj = new Date(this.endDate);
				if (startDateObj > endDateObj) {
				    this.showError("å¼€å§‹æ—¥æœŸä¸èƒ½æ™šäºç»“æŸæ—¥æœŸï¼");
				    return;
				}
			
				// å‘æœåŠ¡å™¨å‘èµ·åˆ›å»ºå­¦æœŸçš„è¯·æ±‚
				this.createSemesterRequest();
			},
			
			
			createSemesterRequest(){
				// æ„å»ºå­¦æœŸæ•°æ®å¯¹è±¡
				const semesterData = {
					name: this.semesterName,
					startTime: this.startDate,
					endTime: this.endDate,
				};
				// å‘æœåŠ¡å™¨å‘é€ POST è¯·æ±‚åˆ›å»ºå­¦æœŸ
				uni.showLoading({
				    title: 'æ­£åœ¨åˆ›å»ºæ–°å­¦æœŸ...', // åŠ è½½åŠ¨ç”»çš„æç¤ºæ–‡å­—
				    mask: true // é˜»æ­¢ç‚¹å‡»èƒŒæ™¯æ—¶å…³é—­åŠ è½½æç¤º
				});
				uni.request({
					url: `${this.apiUrl}/admin/createSemester`, 
				    method: 'POST',
				    data: semesterData, // å‘é€å­¦æœŸæ•°æ®
				    success: (res) => {
						if (res.data.code === '000') {
							this.showError("å­¦æœŸåˆ›å»ºæˆåŠŸï¼", "#28a745");
							
							this.loadInactiveSemesterList();
							uni.showToast({
							    title: 'åˆ›å»ºæˆåŠŸ',  // æç¤ºçš„æ–‡æœ¬
							    icon: 'success',       // å¯é€‰å€¼ï¼š'success', 'loading', 'none'ï¼Œåˆ†åˆ«è¡¨ç¤ºæˆåŠŸæç¤ºã€åŠ è½½æç¤ºå’Œæ²¡æœ‰å›¾æ ‡çš„æç¤º
							    duration: 1000      // æç¤ºæ¡†çš„æ˜¾ç¤ºæ—¶é•¿ï¼Œå•ä½æ¯«ç§’ï¼Œé»˜è®¤2000ms
							});
						} 
						else {
							// å¦‚æœå¤±è´¥ï¼Œæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
							this.showError(res.data.info);
						}
				    },
				    fail: () => {
						// è¯·æ±‚å¤±è´¥å¤„ç†
						this.showError("ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åå†è¯•");
				    },
					complete: () => {
						this.closeCreateSemesterModal(); // å…³é—­åˆ›å»ºå­¦æœŸå¼¹çª—
						// éšè—åŠ è½½åŠ¨ç”»
						uni.hideLoading();
					}
				});
			},
			
			
			resetCreateSemesterFields() {
			    this.semesterName = '';
			    this.startDate = '';
			    this.endDate = '';
			},
			
			
			isValidDate(year, month, day) {
			  const date = new Date(year, month - 1, day); // æœˆä»½å‡ 1
			  return date.getFullYear() === parseInt(year) &&
			         date.getMonth() === (parseInt(month) - 1) &&
			         date.getDate() === parseInt(day);
			},
			
			
			
			// ç‚¹å‡»å–æ¶ˆæŒ‰é’®å–æ¶ˆåˆ›å»ºå­¦æœŸè¡¨å•
			closeCreateSemesterModal() {
			    this.showCreateSemesterModal = false; 
			    this.resetCreateSemesterFields(); 
			},

			
			
			
			
			loadAdminInf(){
				
			},
			
			
			
			
			
			// è·å–æœªå¯ç”¨å­¦æœŸçš„åˆ—è¡¨
			loadInactiveSemesterList(){
				uni.request({
				    url: `${this.apiUrl}/admin/queryAllSemester`, 
				    method: 'GET',
				    success: (res) => {
						 // console.log(res);
				        if (res.data.code === '000') {
							this.inactiveSemesterList = res.data.data;
				        } 
						else {
							this.showError(res.data.info); // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
				        }
				    },
				    fail: () => {
						this.showError("ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åå†è¯•");
				    }
				});
			},
			
			// è·å–å¯ç”¨å­¦æœŸçš„åˆ—è¡¨
			loadActiveSemesterList(){
				uni.request({
				    url: `${this.apiUrl}/admin/queryCurrentSemester`, 
				    method: 'GET',
				    success: (res) => {
						 // console.log(res);
				        if (res.data.code === '000') {
							this.activeSemester = res.data.data;
				        } 
						else {
							this.showError(res.data.info); // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
				        }
				    },
				    fail: () => {
						this.showError("ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åå†è¯•");
				    }
				});
			},
			
			

			
			
			

			
			
			
			// å­¦æœŸçŠ¶æ€åˆ‡æ¢
			setCurrentSemesterRequest() {
				uni.showLoading({
					title: 'æ­£åœ¨å¯ç”¨å­¦æœŸ...', // åŠ è½½åŠ¨ç”»çš„æç¤ºæ–‡å­—
					mask: true // é˜»æ­¢ç‚¹å‡»èƒŒæ™¯æ—¶å…³é—­åŠ è½½æç¤º
				});
				uni.request({
					url: `${this.apiUrl}/admin/setCurrentSemester?semesterId=${this.selectedSemesterId}`,  // åœ¨ URL ä¸­ç›´æ¥ä¼ é€’æŸ¥è¯¢å‚æ•°
					method: 'GET',  
					success: (res) => {
						//console.log(res);
				        if (res.data.code === '000') {
							this.showError("å­¦æœŸå¯ç”¨æˆåŠŸï¼", "#28a745");
							this.loadActiveSemesterList();
							this.loadInactiveSemesterList();
							uni.showToast({
							    title: 'ä¿®æ”¹æˆåŠŸ',  // æç¤ºçš„æ–‡æœ¬
							    icon: 'success',       // å¯é€‰å€¼ï¼š'success', 'loading', 'none'ï¼Œåˆ†åˆ«è¡¨ç¤ºæˆåŠŸæç¤ºã€åŠ è½½æç¤ºå’Œæ²¡æœ‰å›¾æ ‡çš„æç¤º
							    duration: 1000      // æç¤ºæ¡†çš„æ˜¾ç¤ºæ—¶é•¿ï¼Œå•ä½æ¯«ç§’ï¼Œé»˜è®¤2000ms
							});
				        } 
						else {
							this.showError(res.data.info); // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
				        }
					},
					fail: () => {
						this.showError("ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åå†è¯•");
					},
					complete: () => { 
						uni.hideLoading();
						this.closeSecondConfirmationModal();  
					}
				});
			},
			
			
			
			
			
			// ç¡®è®¤æ›´æ”¹å­¦æœŸçŠ¶æ€
			confirmChangeStatus() {
				this.setCurrentSemesterRequest();
			},


			
			// æ‰“å¼€ç¬¬ä¸€ä¸ªç¡®è®¤å¼¹çª—
			openFirstConfirmationModal(semesterId, Name) {
			    this.selectedSemesterId = semesterId;
				this.selectedSemesterName = Name;
			    this.showFirstConfirmationModal = true;
			},
			
			// æ‰“å¼€ç¬¬äºŒä¸ªç¡®è®¤å¼¹çª—
			openSecondConfirmationModal() {
			    this.showFirstConfirmationModal = false;  
			    this.showSecondConfirmationModal = true;  
			},
			
			// å…³é—­ç¬¬ä¸€ä¸ªç¡®è®¤å¼¹çª—
			closeFirstConfirmationModal() {
			    this.showFirstConfirmationModal = false;
			    this.selectedSemesterId = "";
				this.selectedSemesterName="";
			},
			
			// å…³é—­ç¬¬äºŒä¸ªç¡®è®¤å¼¹çª—
			closeSecondConfirmationModal() {
			    this.showSecondConfirmationModal = false;
			    this.selectedSemesterId = "";
				this.selectedSemesterName="";
			},
			
			
			viewAllCourses(){
				uni.navigateTo({
				  url: `/pages/index/admin/courses?activeSemesterId=${this.activeSemester.semesterId}&id=${this.who}`
				});


			},
			
			
			
			// åº•éƒ¨ç‚¹å‡»å¯¼èˆªæ æŒ‰é’®åˆ‡æ¢é¡µé¢
			// goToHome() {
			// 	uni.pageScrollTo({
			// 		scrollTop: 0, 
			// 		duration: 500, 
			// 	});
			// },
			// goToTeachers() {
			// 	uni.redirectTo({
			// 		url: `/pages/index/admin/admin2?id=${this.who}`  // æ·»åŠ  id å‚æ•°
			// 	});
			// },

			// goToProfile() {
			// 	uni.redirectTo({
			// 		url: `/pages/index/admin/admin3?id=${this.who}`  // æ·»åŠ  id å‚æ•°
			// 	});
			// }
			
			
			
			
			
			goToHome() {
				uni.pageScrollTo({
					scrollTop: 0, // æ»šåŠ¨åˆ°é¡µé¢é¡¶éƒ¨
					duration: 500, // æ»šåŠ¨åŠ¨ç”»çš„æŒç»­æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
				});
			
			},
			goToTeachers() {
				if(this.who){
					uni.redirectTo({
						url: `/pages/index/admin/admin2?id=${this.who}`  // æ·»åŠ  id å‚æ•°
					});
				}
				else{
					uni.reLaunch({
						url: "/pages/index/admin/admin2"
					});
				}
			},
			goToProfile() {
				if(this.who){
					uni.redirectTo({
						url: `/pages/index/admin/admin3?id=${this.who}`  // æ·»åŠ  id å‚æ•°
					});
				}
				else{
					uni.reLaunch({
						url: "/pages/index/admin/admin3"
					});
				}
			},
			
			
			
			
			
			
			
			
			

		},
	};
</script>
